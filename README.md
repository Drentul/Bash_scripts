# Описание

Скрипты для помощи в настройке и управлении окружением и инструментами тестирования. Адаптированы для использования на Linux (потенциально MacOS)

Для использования, путь к папке со скриптами должен так или иначе находиться в $PATH. Вы можете временно изменить переменную командой export PATH=$PATH:{path-to-scripts}, записать соответствующую команду в ~/.bashrc для выполнения при запуске нового терминала или изменить содержимое PATH, записанного в /etc/environment. Или же вы можете просто запускать скрипты, находясь в одной с ними папке.

## Описание работы и параметры запуска скриптов

### adb_lib
Библиотека с функциями и переменными. В разделе "Переменные" вы должны вбить свои пути для поиска apk, сохранения скриншотов, название сетевого интерфейса Ethernet.

### adb_connect_ethernet
Без параметров  
Скрипт выполняет сканирование сети Ethernet, и пытается поочередно соединиться по adb с каждым найденынм в ней устройством. Полезно для быстрого подключения вслепую к приставкам. Теоретически рассчитано на использование с несколькими утсройствами, например при подключении через Ethernet концентратор.

### adb_install
Без параметров  
Скрипт ищет устройства, подключенные по adb. В случае, если их несколько, спросит к какому из них мы хоти обратиться. Далее скрипт спросит какой apk из списка (исользуется путь из adb_lib) мы хотим устрановить. В случае, если на устройстве уже есть приложение с таким package id, то оно предварительно будет удалено вместе с данными, а потом установлено новое из apk.

### adb_props
Без параметров  
Скрипт ищет и предлагает выбрать устройство, подключенное по adb. Затем выводит некоторые properties с этого устройства на экран в виде текстовой строки заданного вида. В данный момент выводится строка "$device\_name"', Android '"$droid\_ver" - для быстрого определения устройства и версии ОС для копирования в тикеты.

### adb_run
adb_run {полный путь к apk}
или 
adb_run (без параметров)
В работе скрипта предполагается, что по adb подключено только одно устройство. Скрипт по содержимому apk определяет имя пакета и нужные активити, чтобы потом по adb остановить и снова запустить соответствующее приложение. Помогает если нужно часто перезапускать приложение на STB, где для этого надо сделать много действий.
Если скрипт запущен без параметров, то целевой apk будет предложено выбрать из списка. Папка, в которой будет производитсья поиск задается в adb_lib.

### adb_screen
Без параметров  
Скрипт ищет и предлагает выбрать устройство, подключенное по adb. Затем скрипт сохраняет скриншот экрана устройства, а потом копирует его на устройство в определенную папку. Исходный скриншот будет удален с устройства.

### adb_screen_simple
Без параметров  
Скрипт перебирает все устройства, подключенные по adb, а затем снимает скриншот для каждого из них. Для избежания коллизий в названиях название будет сгенерировано в виде дата\_время\_случайные символы. Потом скриншоты будут перенесены на компьютер в назначенную для этого папку, в подпапки вида /<имя устройства>/<дата>, а с утройства удалены. Рекомендуется повесить этот скрипт на исполнение по какому-то сочетанию клавиш.

### adb_logcat
Без параметров
Скрипт перебирает все устройства, подключенные по adb как и adb_screen_simple, а затем снимает лог с устройства. Не забудьте установить папку для сохранения в параметрах скрипта. Рекомендуется повесить этот скрипт на исполнение по какому-то сочетанию клавиш.

### bad_inet
stop - остановить работу профиля.
show - показать настройки tc qdisc, относящиеся к настраиваемому сетевому интерфейсу
start - применять ряд выставленных настроек для траффика через указанный сетевой интерфейс

Изменение настроек профиля производится непосредственно в коде скрипта. Для справки можно посмотреть руководства по ссылкам: https://calomel.org/network_loss_emulation.html, https://www.cs.unm.edu/~crandall/netsfall13/TCtutorial.pdf. (Скрипт является немного переписанной версией с calomel.org, с добавлением ограничения ширины канала)

### start_shaping, stop_shaping
Без параметров
Скрипты для шейпинга траффика на определенном сетевом интерфейсе.
